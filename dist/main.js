!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";var r=function(){function t(t){this._m=t}return t.prototype.getFramework=function(){return this._m},t}();e.a=r},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=function(t,e){this.allApps=t,this.getCurrent=e.getCurrent,this.setCurrent=e.setCurrent};e.a=r},function(t,e,n){"use strict";function r(t,e){return[new ReadableStream({start:function(e){return t(e.enqueue.bind(e))}}),new WritableStream({write:function(t){return e().write(t)}})]}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";(function(t){e.a=(window||t||self).driver&&(window||t||self).driver.eval}).call(this,n(1))},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(1))},function(t,e,n){"use strict";var r=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},a=n(5),o="object"==typeof self&&self&&self.Object===Object&&self,i=a.a||o||Function("return this")(),s=function(){return i.Date.now()},u=i.Symbol,c=Object.prototype,l=c.hasOwnProperty,f=c.toString,d=u?u.toStringTag:void 0;var p=function(t){var e=l.call(t,d),n=t[d];try{t[d]=void 0;var r=!0}catch(t){}var a=f.call(t);return r&&(e?t[d]=n:delete t[d]),a},v=Object.prototype.toString;var g=function(t){return v.call(t)},b="[object Null]",m="[object Undefined]",h=u?u.toStringTag:void 0;var w=function(t){return null==t?void 0===t?m:b:h&&h in Object(t)?p(t):g(t)};var y=function(t){return null!=t&&"object"==typeof t},j="[object Symbol]";var k=function(t){return"symbol"==typeof t||y(t)&&w(t)==j},M=NaN,O=/^\s+|\s+$/g,S=/^[-+]0x[0-9a-f]+$/i,E=/^0b[01]+$/i,L=/^0o[0-7]+$/i,P=parseInt;var C=function(t){if("number"==typeof t)return t;if(k(t))return M;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(O,"");var n=E.test(t);return n||L.test(t)?P(t.slice(2),n?2:8):S.test(t)?M:+t},_="Expected a function",T=Math.max,W=Math.min;var x=function(t,e,n){var a,o,i,u,c,l,f=0,d=!1,p=!1,v=!0;if("function"!=typeof t)throw new TypeError(_);function g(e){var n=a,r=o;return a=o=void 0,f=e,u=t.apply(r,n)}function b(t){var n=t-l;return void 0===l||n>=e||n<0||p&&t-f>=i}function m(){var t=s();if(b(t))return h(t);c=setTimeout(m,function(t){var n=e-(t-l);return p?W(n,i-(t-f)):n}(t))}function h(t){return c=void 0,v&&a?g(t):(a=o=void 0,u)}function w(){var t=s(),n=b(t);if(a=arguments,o=this,l=t,n){if(void 0===c)return function(t){return f=t,c=setTimeout(m,e),d?g(t):u}(l);if(p)return clearTimeout(c),c=setTimeout(m,e),g(l)}return void 0===c&&(c=setTimeout(m,e)),u}return e=C(e)||0,r(n)&&(d=!!n.leading,i=(p="maxWait"in n)?T(C(n.maxWait)||0,e):i,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==c&&clearTimeout(c),f=0,a=l=o=c=void 0},w.flush=function(){return void 0===c?u:h(s())},w};function D(t,e,n,r){var a=new MessageChannel,o=new MessageChannel;t.postMessage({type:"initPorts",alertPort:a.port2,consolePorts:o.port2},"*",[a.port2,o.port2]),a.port1.addEventListener("message",x(e.alertPort.postMessage.bind(e.alertPort),500)),e.alertPort.addEventListener("message",x(a.port1.postMessage.bind(a.port1),500)),o.port1.addEventListener("message",(function(t){return n(t.data)})),r.push(new WritableStream({write:o.port1.postMessage.bind(o.port1)}))}n.d(e,"a",(function(){return D}))},function(t,e,n){"use strict";function r(t,e){Array.prototype.filter.call(t.childNodes,(function(t){return t.classList.includes("ol-inject")})).length||e()}function a(t){t.classList.add("ol-inject")}var o=function(){function t(t,e){this._ui=t,this.options=e}return t.prototype.listen=function(t){var e=new MutationObserver(this.mutated.bind(this));return e.observe(t,{attributes:!0,childList:!0,subtree:!0}),e.disconnect.bind(e)},t.prototype.olStartup=function(t){},t.prototype.ol_m_click=function(t,e){},t.prototype.mutated=function(t,e){var n=this._ui.Current;t.forEach((function(t){t.target;t.addedNodes&&t.addedNodes.forEach((function(t){var e,o,i=this;if(t.classList){var s=void 0;[].includes.call(t.classList,"osjs-window-icon")&&function(t,e){r(t,(function(){if(e){var n=document.createElement("span");t.appendChild(n),n.addEventListener("click",e.titleClickNative.bind(e,t)),a(n)}}))}(t,n),[].includes.call(t.classList,"osjs-gui-box")&&(o=this,r(e=t,(function(){Array.prototype.filter.call(e.childNodes,(function(t){return t.classList.includes("osjs-gui-menubar")})).forEach((function(t){r(t,(function(){var e=document.createElement("span");e.innerText="ObjectLand",e.addEventListener("click",o.ol_m_click.bind(o,e)),t.appendChild(e),a(t)}))})),a(e)}))),[].includes.call(t.classList,"ol-rolly-injected")&&function(t,e){r(t,(function(){t.addEventListener("olStartup",e.olStartup.bind(e,t)),a(t)}))}(t,this),(s=[].filter.call(t.classList,(function(t){return t.startsWith("green-flag")}))).length&&s.forEach((function(t){return t.addEventListener("click",i.options.onFlagScratchClicked.bind(t,i))}))}}))}))},t}();e.a=o},function(t,e,n){"use strict";function r(t,e,n){t.data.port.postMessage({postToWindow:{workerID:e,data:n}})}function a(t){var e=t.win,n=(t.workerMap,t.libs,t.chrome,t.callback);if(e.inGadgetHelper){new Map;e.addEventListener("message",(function(t){if("init"===t.data.type){r.bind(void 0,t);t.data.port.addEventListener("message",(function(e){if("addGadget"===e.data.type){var n=new Array(10).map((function(t){return String.fromCharCode(128*Math.random()+20)})).reduce((function(t,e){return t?t+e:e}));t.data.port.postMessage({postToWindow:{workerID:n,create:!0,url:e.data.data}});var r=new OffscreenCanvas(400,400),a=new MessageChannel;!function(t,e,n,r){e.addEventListener("message",(function(t){}))}(0,a.port1,0,t.data.port),t.data.port.postMessage({postToWindow:{workerID:n,data:{canvas:r,port:a.port2},transferables:[r,a.port2]},postToWindow_transferables:[r,a.port2]})}}))}}))}else{var a=new MessageChannel;e.postMessage({workerID:"GadgetHelper",data:{type:"init",port:a.port2},transferrables:[a.port2]},"*",[a.port2]),a.port1.addEventListener("message",(function(t){t.data.postToWindow&&e.postMessage(Object.assign({},t.data.postToWindow,{transferables:t.data.postToWindow_transferables}),"*",t.data.postToWindow_transferrables||[]),t.data.callBackLink&&n((function(e,n){return a.port1.postMessage({winCallback:t.data.callBackTag,data:e,transferables:n},n)}))})),e.addEventListener("message",(function(t){a.port1.postMessage({messageFromWindow:t.data},t.data.transferables)}))}}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";var r=n(4);function a(t,e,n,a){var o={};return function(i,s){a(i,(function(t){i.value=o[s]}),(function(t){o[s]=i.value}));var u=function(){var a=o[s]||"";return"="==a.charAt(0)?Object(r.a)(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.forEach((function(e){var n=Object.keys(e).reduce((function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t}),{});Object.getOwnPropertySymbols(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);r.enumerable&&(n[t]=r)})),Object.defineProperties(t,n)})),t}({},n,{log:t,chrome:void 0,get alert(){return e.olAlerter.alert},get prompt(){return e.olAlerter.prompt}}),a.substring(1)):isNaN(parseFloat(a))?a:parseFloat(a)};Object.defineProperty(n,s,{get:u}),Object.defineProperty(n,s.toLowerCase(),{get:u})}}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";function r(t,e){return new Promise((function(n){var r,a,o=[new ReadableStream({start:function(t){return new Promise((function(e){r=t,a=e}))}}),new WritableStream({write:function(t){return Promise.resolve(r.enqueue(t))},close:function(){a()}})];if(!e)return n();e.get(t.location+"/settings/api/set",(function(t,e){t.body.pipeTo(o[1])})),e.get(t.location+"/settings/api/stream",(function(t,e){return new Response(o[0])})),e.get(t.location+"/init",(function(t,e){n(t)}))}))}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=function(t,e,n,r){return new(n||(n=Promise))((function(a,o){function i(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},a=function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=function(){function t(t,e,n){this._chrome=t,this._ui=e,this.opts=n}return t.prototype.initServices=function(){var t=this;return new Promise((function(e){t._chrome.storage.sync.get(["use"],(function(n){n.use||t._chrome.storage.sync.set({use:n.use=[]}),Promise.all(n.use.map((function(e){return new Promise((function(n){return t._chrome.runtime.connect(e,n)})).then((function(t){return{id:e,port:t}}))}))).then((function(t){e(t)}))}))}))},t.prototype.onSqueakLinked=function(t){return r(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=this._chrome,[4,t.call("when:send:to:","jsCMessage","call:with:",(function(t){return r(this,void 0,void 0,(function(){var n,r;return a(this,(function(a){switch(a.label){case 0:return[4,t.call("data")];case 1:return n=a.sent(),[4,new Promise((function(t){return e.runtime.postMessage(n,t)}))];case 2:return r=a.sent(),[4,t.call("reply:",r)];case 3:return[2,a.sent()]}}))}))}))];case 1:return n.sent(),[2]}}))}))},t}();e.a=o},function(t,e,n){"use strict";n.r(e),function(t){var e=n(11),r=n(0),a=n(7),o=n(10),i=n(8),s=n(3),u=n(2),c=n(9),l=n(6),f=window||self||t;f.isSugar=!1;var d,p,v,g,b,m=void 0,h=[],w=Object(s.a)((function(t){return m=t}),(function(){return d})),y=(new u.a([],{getCurrent:function(){return d},setCurrent:function(t){d=t}}),new u.a(h,{getCurrent:function(){return p},setCurrent:function(t){p=t}}),new a.a(r.a,{onFlagScratchClicked:function(t,e){var n=f.document.getElementsByClassName("project-title"),r=[].filter.call(n,(function(t){return t.innerHTML.includes("Pangea")}));r.length&&r.forEach((function(t){return t.addEventListener("click",(function(t){var e=window.open("https://snap.berkeley.edu/embed?project=Pangea%20OS%20NT&user=gkgoat&showTitle=true&showAuthor=true&editButton=true&pauseButton=true");Object(l.a)(e,f,m,h)}))}))}}));f._$console=w,f._$allApps=h,f.Sheet=c.a.bind(void 0,m),f.addEventListener("message",(function(t){if("createConsole"===t.data.type){var e=new MessageChannel;t.source.postMessage({port:e.port2},"*",[e.port2]),h.push(new WritableStream({write:e.port2.postMessage.bind(e.port2)})),e.port1.addEventListener("message",(function(t){return m(t.data)}))}})),f.console.log=(b=f.console.log,function(t){return m(t),b(t)}),f.prompt=function(t){return function(e){return t(e)}}(f.prompt);var j=f.chrome;j&&j.app&&void 0!==j.app.window&&j.app.window.create("/dist/embed.html#/main.js",{},(function(t){t,t.contentWindow.addEventListener("message",(function(t){return f.postMessage(t.data,"*",t.data.transferables)})),f.addEventListener("message",(function(e){"comToMainWindow"==e.data.type&&t.postMesage(e.data.data,"*",e.data.transferables)}))})),(f.olKAPI||(f.olKAPI={})).addUI=function(t){r.a.Current=new r.a(t)};var k,M,O,S=!0,E=new Map,L=new Map;new Map,new OffscreenCanvas(1e3,1e3);if(f.workerMap&&(E=f.workerMap,S=!1,delete f.workerMap,f.addEventListener("message",(function(t){if(t.data.workerID&&t.data.create){f.ol_w_set(t.data.workerID,new Worker(t.data.url))}else t.data.workerID&&E.get(t.data.workerID).postMessage(Object.assign({},t.data.data,{transferables:t.data.transferables}),t.data.transferrables)})),f.ol_w_set=function(t,e){E.set(t,e),e.addEventListener("message",(function(e){f.postMessage({responseID:t,data:e.data,transferables:e.data.transferables},"*",e.data.transferables)}))}),f.define||f.System&&f.System.amdDefine){var P=f.define||f.System&&f.System.amdDefine;P("activity/activity",["sugar-web/activity/activity","sugar-web/env","olPalette"],(function(t,e,n){f.isSugar=!0,f.rollyChain&&f.rollyChain.forEach((function(t){return t.setIsSugar(!0)})),v=t,e.getEnvironment((function(t,e){e.user.name,f.addEventListener("DOMContentLoaded",(function(t){v.start(),g=new n.OLPallette(document.getElementById("olPalleteBarItem"),"ObjectLand")}))}))})),P("ol.bridge",["exports"],(function(t){Object.defineProperty(t,"enq",{get:function(){return m}}),Object.defineProperty(t,"pallette",{get:function(){return g}})}))}if(j&&(M=new e.a(j,r.a,{getSqueakProxy:function(){},getLink:function(){return y}})),!j&&f.document&&(Object(i.a)({win:f,workerMap:E,libs:L,chrome:void 0,callback:function(t){k=t}}),S=S&&f.isGadgetHelper),f.ServiceWorkerWare&&(O=new f.ServiceWorkerWare),f.require&&!O)try{O=f.require("express")()}catch(t){}f.document&&y.listen(document.body),f.location&&(f.location.hostname.includes("ol")||"chrome-extension"===f.location.protocol)&&(S=!0),Object(o.a)(f,O).then((function(t){t&&t})),M&&M.initServices().then((function(t){t})),f.addEventListener("message",(function(t){"exlinkgadget"===t.data.type&&k(Object.assign({},t.data.data,{transferables:t.data.transferables}),t.data.transferables),j&&t.data.id&&t.data.data&&"chrome"===t.data.type&&j.runtime.postMessage(Object.assign({},t.data.data,{isFromWebpage:!0,id:t.data.id}),(function(e){f.postMessage({chromeResponseID:t.data.id,chromeResponseData:e})})),k&&"gadget"===t.data.type&&k(t.data.data,t.data.transferables)})),f.open&&new Promise((function(t,e){if(!j)return e();j.storage.sync.get(["ol-deskEnv"],(function(t){e(t["ol-deskEnv"])}))})).catch((function(t){return t||Promise.resolve((f.prompt.default||f.prompt).call(f,"Desk Env URL"))})).then((function(t){return f.open(t)}))}.call(this,n(1))}]);